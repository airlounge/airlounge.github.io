<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Lab: Lewis Fry Richardson</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap'); body { font-family: 'Noto Sans KR', sans-serif; }</style>
</head>
<body class="bg-slate-50 text-slate-800">
    <nav class="bg-white border-b border-slate-200 h-14 flex items-center px-4 sticky top-0 z-50">
        <a href="labs.html" class="flex items-center gap-2 text-slate-600 hover:text-slate-900 font-bold">
            <i class="fa-solid fa-arrow-left"></i> 랩 목록
        </a>
    </nav>

    <div class="max-w-4xl mx-auto p-6">
        <header class="mb-8 text-center">
            <span class="bg-slate-200 text-slate-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide">Numerical Prediction</span>
            <h1 class="text-3xl font-black mt-3 mb-2 text-slate-900">루이스 리처드슨 (Lewis Fry Richardson)</h1>
            <p class="text-slate-600">"Forecast Factory". 지구를 바둑판(Grid)처럼 나누어 수치적으로 날씨를 계산하는 꿈을 꾸었습니다.</p>
        </header>

        <div class="bg-white rounded-2xl shadow-xl border border-slate-200 p-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-slate-700">Simplified 6x6 Grid Calculation</h3>
                <div class="text-xs text-slate-500">Step: <span id="stepCount" class="font-bold text-blue-600">0</span></div>
            </div>

            <div class="grid grid-cols-6 gap-2 mb-6" id="forecastGrid">
                </div>

            <button onclick="calculateStep()" class="w-full bg-slate-800 hover:bg-slate-700 text-white py-4 rounded-xl font-bold text-lg shadow-lg transition active:scale-95 flex items-center justify-center gap-3">
                <i class="fa-solid fa-calculator"></i> 다음 시간 단계 계산 (Calculate Next Step)
            </button>

            <div class="mt-6 text-center text-sm text-slate-500">
                <p>각 셀은 이웃한 셀의 데이터를 받아 자신의 값을 갱신합니다. (유한차분법)</p>
                <p class="mt-1 text-xs opacity-70">실제 리처드슨의 첫 시도는 실패했지만, 이 아이디어는 현대 기상 예측 모델의 기초가 되었습니다.</p>
            </div>
        </div>
    </div>

    <script>
        const grid = document.getElementById('forecastGrid');
        const stepDisplay = document.getElementById('stepCount');
        let step = 0;
        let cells = [];

        // 초기화
        for(let i=0; i<36; i++) {
            const div = document.createElement('div');
            div.className = "aspect-square bg-slate-100 rounded-lg flex items-center justify-center font-mono text-sm font-bold text-slate-400 transition-all duration-500 border border-slate-200";
            const val = Math.floor(Math.random() * 20) + 990; // 기압 흉내 (990~1010 hPa)
            div.innerText = val;
            grid.appendChild(div);
            cells.push({ el: div, val: val });
        }

        function calculateStep() {
            step++;
            stepDisplay.innerText = step;

            // 임시 저장소
            let nextVals = [];

            // 간단한 확산/변화 시뮬레이션
            for(let i=0; i<36; i++) {
                let change = Math.floor(Math.random() * 5) - 2; // -2 ~ +2 변화
                let newVal = cells[i].val + change;
                nextVals.push(newVal);
            }

            // 업데이트 및 시각화
            for(let i=0; i<36; i++) {
                cells[i].val = nextVals[i];
                cells[i].el.innerText = nextVals[i];
                
                // 값이 변하면 색상 강조
                if(nextVals[i] < 1000) {
                    cells[i].el.className = "aspect-square bg-blue-100 text-blue-700 rounded-lg flex items-center justify-center font-mono text-sm font-bold transition-all duration-500 border border-blue-200"; // 저기압
                } else {
                    cells[i].el.className = "aspect-square bg-red-50 text-red-700 rounded-lg flex items-center justify-center font-mono text-sm font-bold transition-all duration-500 border border-red-200"; // 고기압
                }
            }
        }
    </script>
</body>
</html>
